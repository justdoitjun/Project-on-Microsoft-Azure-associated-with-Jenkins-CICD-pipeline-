pipeline{
    agent any
    tools {
			maven('maven396')
    }
    stages {
        stage('mvn build'){
            steps{
                echo 'mvn clean package'
                sh 'chmod +x mvnw'
		            sh 'mvn clean package'
								//sh './mvnw clean package'

                // dir('final-service'){
                // }
                //sh 'mvn -B -f /bitnami/jenkins/home/workspace/justdoitjun-cicd/pom.xml install'
               //sh 'mvn -Dmaven.test.failure.ignore=true -N -f /bitnami/jenkins/home/workspace/justdoitjun-cicd/pom.xml clean package'
         
            }
        }
        stage('code upload'){
		        steps{
			        echo 'code upload'
							sh "if [ ! -d "/devops/codedeploy" ]; then echo "디렉토리가 존재하지 않습니다. 디렉토리를 생성합니다." mkdir -p "/devops/codedeploy" else echo "디렉토리가 이미 존재합니다." fi"
							sh 'mv /bitnami/jenkins/home/workspace/justdoitjun/target/*.war /devops/codedeploy/final-service.war'
              }
        }
    }
}